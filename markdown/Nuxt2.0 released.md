# Nuxt 2.0 å‘å¸ƒäº†

[Vue](https://vuejs.org/) çš„æœåŠ¡ç«¯æ¸²æŸ“æ¡†æž¶ [Nuxt](https://nuxtjs.org/) åˆšåˆš(2018-09-21)ä½Žè°ƒå‘å¸ƒäº†**2.0**ç‰ˆæœ¬.

è·ç¦»`1.0`ç‰ˆæœ¬å‘å¸ƒåˆšåˆšè¿‡åŽ»8ä¸ªæœˆ(2018-01-08).
`1.0`ç‰ˆæœ¬ä¸»è¦æ˜¯é’ˆå¯¹ Vue ä½“ç³»çš„å‡çº§, è€Œ`2.0`åˆ™æ˜¯å¯¹ Webpack ç³»åˆ—çš„å‡çº§(ä¸å¾—ä¸è¯´ Webpack çš„æ›´æ–°é€Ÿåº¦å¤ªå¿«). Nuxtå®˜æ–¹åœ¨npmä¸Šå‘å¸ƒäº† [nuxt-edge](https://www.npmjs.com/package/nuxt-edge) é¡¹ç›®, ä½œä¸ºNuxté¡¹ç›®çš„é¢„è§ˆç‰ˆæœ¬, nuxt-edge æŒç»­æ›´æ–°äº†6ä¸ªæœˆçš„2.0ç‰ˆæœ¬, æ‰å°†2.0å‘å¸ƒæˆä¸ºNuxtçš„æ­£å¼ç‰ˆ.

## Nuxt2.0çš„å˜åŒ–

### å¦‚ä½•å‡çº§åˆ°2.0

Nuxt2.0æ²¡æœ‰ç ´åæ€§å˜æ›´, å¯ä»¥ç›´æŽ¥å‡çº§. æ‰€ä»¥ä½ å¯ä»¥å°è¯•ç›´æŽ¥ä¿®æ”¹ `package.json`. é€šè¿‡å‘½ä»¤æ¥ä¿®æ”¹ `yarn add nuxt@^2.0.0` æˆ–è€… `npm install nuxt@^2.0.0` ðŸ˜‰

#### å‡çº§æ­¥éª¤(ç¹çä½†æ˜¯å®‰å…¨)

* ä»”ç»†é˜…è¯»å‡çº§å…¬å‘Š(release note)
* å¦‚æžœä½ æ˜¯ç”¨äº†ç‰ˆæœ¬ç®¡ç†å·¥å…·, å…ˆæäº¤å¹¶åŒæ­¥åˆ°æœ€æ–°ç‰ˆæœ¬. ç„¶åŽåˆ‡æ¢åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯
* åœæ­¢ Nuxt è¿›ç¨‹
* [å¯é€‰] åˆ é™¤ `.nuxt` , `node_modules` ç›®å½•å’Œ `yarn.lock` , `package.lock.json` æ–‡ä»¶.
* æ£€æŸ¥ nodejs ç‰ˆæœ¬, æŽ¨èä½¿ç”¨ 5.0 åŠä»¥ä¸Šç‰ˆæœ¬(ä¸ªäººæŽ¨è10.0ç‰ˆæœ¬)
* æ›´æ–°æ–‡ä»¶è¯­æ³•, `nuxt.config.js` , `modules` ,`serverMiddleware` æ–‡ä»¶ä¸­ä½¿ç”¨ `import/export` (ESM) è¯­æ³•ä»£æ›¿ `require` (CommandJS) è¯­æ³•
* æ‰§è¡Œ `npm install` æˆ– `yarn install`
* [å¯é€‰] ä½¿ç”¨ `npm outdated` æˆ– `yarn outdated` æ£€æŸ¥æ˜¯å¦æœ‰éœ€è¦æ›´æ–°çš„æ¨¡å—, å¦‚æžœæœ‰åˆ™æ‰‹åŠ¨æ›´æ–°
* å¦‚æžœç»‘å®šäº†CDNçš„æŒç»­ç»§æ‰¿/æŒç»­å‘å¸ƒå·¥å…·, éœ€è¦æ›´æ–°å·¥å…·é…ç½®ä¸­çš„æ–‡ä»¶ç¼–è¯‘è·¯å¾„, ç”¨æ–°è·¯å¾„ `.nuxt/dist/client` ä»£æ›¿åŽŸè·¯å¾„ `.nuxt/dist/client`

å¦‚æžœè¿˜æœ‰å…¶å®ƒé—®é¢˜, åœ¨[ç¤¾åŒºå®˜ç½‘](https://cmty.app/nuxt)ä¸Šç»™ä»–ä»¬æbug

### ä¸»è¦å˜æ›´

* é‡‡ç”¨äº† Webpack 4.0 ç‰ˆæœ¬. (è¿™æ˜¯Nuxt2çš„ä¸€ä¸ªæœ€é‡è¦å˜åŒ–) åœ¨ `nuxt-edge` é¡¹ç›®ä¸­æŒç»­æ›´æ–°äº†è‹¥å¹²ä¸ªç‰ˆæœ¬, ä»¥ç¡®ä¿å¤§éƒ¨åˆ†æ’ä»¶(plugins)çš„å…¼å®¹æ€§, æœ€ç»ˆæ‰å‘å¸ƒäº†ç¨³å®šç‰ˆæœ¬.
* ä¸ºäº†å®žçŽ° æœåŠ¡ç«¯/å®¢æˆ·ç«¯ çš„ç¼–è¯‘éš”ç¦»(PR #3758), `build.publicPath` çš„é»˜è®¤è·¯å¾„ä»Ž `.nuxt/dist` ä¿®æ”¹ä¸º `.nuxt/dist/client` (.nuxt/dist/ç›®å½•ä¸‹å†åˆ†æˆä¸¤ä¸ªç›®å½• client å’Œ server , ç”¨æ¥æŒ‡å®šä¸åŒçš„ç¼–è¯‘ç»“æžœ)
* `nuxt.config.js` , `serverMiddleware`, `modules` æ–‡ä»¶æ”¯æŒ ESMè¯­æ³•, å¯ä»¥ç›´æŽ¥ä½¿ç”¨ `import/export` äº†.
* å‡çº§åˆ°äº† **Babel7**
* ç”¨ `postcss-preset-env` ä»£æ›¿äº† `postcss-cssnext` [è¯´æ˜Ž](https://moox.io/blog/deprecating-cssnext) (PR #3291), é…ç½®é¡¹ `build.postcss.preset` å˜æˆé’ˆå¯¹ `postcss-preset-env` çš„ [é…ç½®é¡¹](https://github.com/csstools/postcss-preset-env#options)
* ä½¿ç”¨ NodeJS >= 8 æ—¶, æ˜¾ç¤º [nuxt-start](https://www.npmjs.com/package/nuxt-start) , NodeJS < 8æ—¶æ˜¾ç¤º [nuxt-legacy](https://www.npmjs.com/package/nuxt-legacy)
* å‡çº§ `css-loader` çš„æ—¶å€™, ç”¨ `~assets` ç®€å†™æ¥ä»£æ›¿ `~/assets` (å°‘äº†ä¸€ä¸ªæ–œæ ) . ä¾‹å¦‚: `https://www.npmjs.com/package/nuxt-legacy`

### æ–°å¢žç‰¹æ€§

* é¡µé¢å†…JSå¢žåŠ  `watchQuery` å­—æ®µ, ç”¨æ¥ç›‘æŽ§urlçš„queryä¸­æŒ‡å®šå‚æ•°æ˜¯å¦å‘ç”Ÿå˜åŒ–, å¦‚æžœæœ‰å˜åŒ–åˆ™é‡æ–°æ‰§è¡Œé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°(asyncData, fetch, validate, layout ç­‰ç­‰)
* çŽ°åœ¨å¯ä»¥å¿½ç•¥ä¹Ÿæ²¡å‰ç¼€äº†(PR #2594)
* å†…éƒ¨é’©å­æ–¹æ³•å¯ä»¥åœ¨ `nuxt.config.js` ä¸­åˆ†å±‚æ¬¡çš„è®¾ç½®äº†
* é¡µé¢ä¸­å¢žåŠ äº† `loading: false` é…ç½®é¡¹.(PR #3629)
* æ–°çš„ `stores` æ¨¡å—è®¾è®¡, ä»Ž `index.js` åˆ’åˆ†å‡ºäº†4ä¸ªæ–‡ä»¶ `actions.js`, `mutations.js`, `getters.js`, `state.js`
* æ”¯æŒæ–¹æ³•åž‹çš„æ–‡ä»¶åç§° (PR #3787)
* æœåŠ¡ç«¯ä¸­é—´ä»¶ä¿®æ”¹åŽ, è‡ªåŠ¨é‡å¯æœåŠ¡ (PR #3718)
* å¼€ç®±å³ç”¨çš„ https å’Œ sockets (PR #3831)
* `nuxt.config.js` é…ç½®ä¸­æ”¯æŒè®¾ç½® server çš„ `HOST` å’Œ `PORT` (PRs #3701)
* æ”¯æŒ `NUXT_HOST` å’Œ `NUXT_PORT` çŽ¯å¢ƒå˜é‡
* åœ¨ `nuxt.config.js` ä¸­å¯ä»¥ç›´æŽ¥è®¾ç½® Vue çš„config (PR #3655)
* åœ¨ `nuxt.config.js` ä¸­å¢žåŠ  postcss çš„é…ç½®é¡¹ (PR #3734)
* å…è®¸è‡ªå®šä¹‰åŽ‹ç¼©ä¸­é—´ä»¶ (PR #3863)
* ä»¥ `NUXT_ENV_` å¼€å¤´çš„çŽ¯å¢ƒå˜é‡ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ° `process.env` ä¸­ (PR #3862)
* å‡çº§ `no-ssr` åŠŸèƒ½, ä½¿ç”¨äº† `vue-no-ssr 1.0.0`, æ”¯æŒ `placeholderTag`

### ç»†èŠ‚ä¼˜åŒ–

* ä¿®å¤ core/renderer ä¸­scriptæ ‡ç­¾çš„æ¸²æŸ“æ–¹æ³•, è¿›è€Œç§»å‡ºW3Cçš„è­¦å‘Š(PR #2971)
* æ·»åŠ  `render:context` æ–¹æ³•é’©å­ (PR #3294)
* åœ¨ `loadingIndicator` ä¸­ä½¿ç”¨ `background` ä»£æ›¿ `background-color` (PR #3656), åœ¨ SPA æ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨å›¾ç‰‡æˆ–æ¸å˜è‰²äº†.
* ä¿®å¤IEä¸‹ `loadingIndicator` å±…ä¸­é—®é¢˜ (PR #3779)
* å¢žåŠ  `watch` é€‰é¡¹, ç”¨æ¥ç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶é‡å¯ nuxt æœåŠ¡. é»˜è®¤ç›‘å¬çš„æ˜¯ `nuxt.config.js` å’Œ `serverMiddleware` (PRs #3633 and #3718)
* ç”Ÿæˆæ–‡ä»¶æ—¶åŒºåˆ† å®¢æˆ·ç«¯/æœåŠ¡ç«¯ , æœ‰ç›ŠäºŽæé«˜å®‰å…¨æ€§ (PR #3758)
* ç”¨ `webpackbar` å’Œ `consola` æé«˜å‘½ä»¤è¡Œçš„å¯è¯»æ€§ä»¥åŠCIå·¥å…·çš„æ—¥å¿—è¾“å‡º
* æ›´å¥½çš„èµ„æºæ–‡ä»¶å¼•å…¥åç§°, ä¾¿äºŽåŒºåˆ†å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼(PR #3789), ä¹Ÿä¾¿äºŽé˜²æ­¢å¼€å‘æ¨¡å¼ä¸‹çš„æ–‡ä»¶é‡å(Issue #3786)
* åœ¨ fetch å’Œ asyncData å‘ç”Ÿé”™è¯¯æ—¶, ä¼šæŠŠé”™è¯¯ä¼ ç»™å…¨å±€çš„ Vue errorHandler æ–¹æ³• (PR #3652, #3781)
* é”™è¯¯é¡µé¢çš„æå‰æ¸²æŸ“(åœ¨redirectä¹‹å‰) (PR #3782)
* lodash æ¨¡æ¿ä¸­ç¦ç”¨æ¨¡æ¿è¿­ä»£åŠŸèƒ½  (PR #3753)
* ä¼˜åŒ–ç‰¹å®šæ’ä»¶ä¸å­˜åœ¨æ—¶çš„é”™è¯¯è¾“å‡º (PR #3672)
* åœ¨ `nuxt.config.js` ä¸­è‡ªå®šä¹‰app.htmlæ–‡ä»¶çš„è·¯å¾„(PR #3678)
* åˆ›å»º App è¿‡ç¨‹ä¸­å¢žåŠ  `Quite`(é™é»˜)é€‰é¡¹(PR #3705)
* åŽ‹ç¼©å¯¼å‡ºçš„cssæ–‡ä»¶(PR #3857)
* æ–‡ä»¶å˜æ›´æ£€æµ‹ (PR #3893)
* è¦†å†™ `store.registerModule` , èƒ½å¤Ÿåœ¨æœåŠ¡ç«¯æ¸²æŸ“æ¨¡å¼ä¸‹æ­£å¸¸å·¥ä½œ (PR #3909)
* æ·»åŠ èŠ‚æµå‡½æ•°(Throttle), ç”¨æ¥è·³è¿‡æ‰¹é‡åŠ è½½å†…å®¹  (PR #3886)

### å³å°†å¼ƒç”¨

* `vendor` å³å°†è¢«æŠ›å¼ƒ, å› ä¸º Webpack 4å·²ç»ä¸åœ¨ä½¿ç”¨
* ç§»å‡ºäº† DLL æ”¯æŒ, å› å…¶ä¸å¤Ÿç¨³å®š, å¹¶ä¸” Webpack é€Ÿåº¦å·²ç»éžå¸¸å¿«äº†
* åºŸå¼ƒ AggressiveSplittingPlugin æ’ä»¶
* ç”¨ `render.compresser` å‚æ•°ä»£æ›¿ `render.gzip` é€‰é¡¹

### å†…éƒ¨æå‡

* ESLint: ç®­å¤´å‡½æ•°çš„å‚æ•°å§‹ç»ˆä½¿ç”¨æ‹¬å· (PR #3630)
* ESLint: ç¡®ä¿ async å‡½æ•°ä¸­ä¸€å®šæœ‰ await æ–¹æ³•
* ESLint: èƒ½ç”¨ç‚¹(.)å±žæ€§çš„æ—¶å€™å°±ä¸ç”¨ä¸­æ‹¬å·([xx])å±žæ€§
* ESLint: å¼ºåˆ¶ä½¿ç”¨æ‹¬å· (PR #3685)
* ESLint: è¿›åˆ¶ä½¿ç”¨ var å£°æ˜Žå˜é‡ (PR #3681)
* ESLint: èƒ½ä½¿ç”¨ const å°±ä¸ç”¨ let  (PR #3650)

å‚è€ƒ: [ReleaseNote](https://nuxtjs.org/guide/release-notes#v2.0.0)


#### ç»“å°¾, è´´å‡ºæˆ‘çš„Nuxté¡¹ç›®é…ç½®

![screenshot](https://raw.githubusercontent.com/DeronW/deronw.github.io/master/screenshots/WX20180923-134243.png)
